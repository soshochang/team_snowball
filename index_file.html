<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="ninja_snowball.css" type="text/css">
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
	<script type="text/javascript" src="http://localhost:8000/socket.io/socket.io.js"></script>
	<script type="text/javascript" src="crafty.js"></script>
	<script src="game_michael.js" type="text/javascript"></script>
	<style>
		body, html { margin:0; padding:0; overflow:hidden; font-family:Arial; font-size:20px }
		#cr-stage { border:2px solid black; margin:5px auto; color:white }
	</style>
	<script type="text/javascript">
		var socket = io.connect('http://localhost:8000');

		//listen to display message event (to incorporate changes from the server/messages sent by other ppl)
		socket.on('display_message', function (data){
			$('#send_message').append('<p>' + data + '</p>');
		});

		socket.on('display_ninja1_right', function (array){
			x = array[0];
			y = array[1];
			// $('#ninja1').hide();
			console.log(x);
			console.log(y);
			draw();
		});

		socket.on('display_teleport', function (){
			console.log('display_tele')
			x = 50;
			draw();
		});

		// socket.on('display_ninja1_vertical', function (pos){
		// 	y = pos;
		// 	// $('#ninja1').hide();
		// 	draw();
		// });

		var x = 100;
		var y = 150;

		function draw(){
				console.log(x)
				$('#add_image').html('<img id="ninja1" src="/ninja/img/down1.png" style="left:' + x +'px; top:' + y +'px;">');
				click_listen();
				
				player1.x = 50;

				
			}

		function click_listen(){
			$("#ninja1").click(function(){
				console.log(x);
				x = x + 30;
				draw();

				socket.emit('send_ninja1_right', x);	
			});
		}

		// ninja_move_listen();

		// function ninja_move_listen(){
		// 	// alert('hey');
		// 	$(document).keydown(function(data){
		// 		// move right
		// 		if(data.keyCode == 39)
		// 		{
		// 			console.log(x);
		// 			x = x + 10;
		// 			draw();
		// 			array = [x, y];
		// 			socket.emit('send_ninja1_right', array);
		// 		}

		// 		// move left
		// 		if(data.keyCode == 37)
		// 		{
		// 			console.log(x);
		// 			x = x - 10;
		// 			draw();
		// 			array = [x, y];
		// 			socket.emit('send_ninja1_right', array);
		// 		}

		// 		// move up
		// 		if(data.keyCode == 38)
		// 		{
		// 			console.log(y);
		// 			y = y - 10;
		// 			draw();
		// 			array = [x, y];
		// 			socket.emit('send_ninja1_right', array);
		// 		}

		// 		// move down
		// 		if(data.keyCode == 40)
		// 		{
		// 			console.log(y);
		// 			y = y + 10;
		// 			draw();
		// 			array = [x, y];
		// 			socket.emit('send_ninja1_right', array);
		// 		}
		// 	});
		// }




		//trigger send message event 
		$(document).ready(function (){
			$('form#send_message').submit(function(){
				
				var message = $('#message').val();

				// does the jquery portion of modifying the user's page
				$('#send_message').append('<p>' + message + '</p>');
				$('#message').val('');

				//trigger send_message event, submit message to server so that other ppls pages can also be modified
				socket.emit('send_message', message);

				return false;
			});


			// draw();

			// $('#ninja1').keypress(function(){

			// });

			// $("#ninja1").click(function(){
			// 	$("#ninja1").hide();
			// });

			// $(document).keyup(function(data){
			// if(data.keyCode == 37)
			// {
			// 	new_x = $('#x').val() - 1;
			// 	$('#x').val(new_x);
			// 	$('#direction').val('left');
			// }
			// else if(data.keyCode == 39)
			// {
			// 	new_x = parseInt($('#x').val()) + 1;
			// 	$('#x').val(new_x);
			// 	$('#direction').val('right');
			// }
			// else if(data.keyCode == 38)
			// {
			// 	new_y = $('#y').val() - 1;
			// 	$('#y').val(new_y);
			// 	$('#direction').val('top');
			// }
			// else if(data.keyCode == 40)
			// {
			// 	new_y = parseInt($('#y').val()) + 1;
			// 	$('#y').val(new_y);
			// 	$('#direction').val('down');
			// }

			// $('#test_form').submit();
			// })

			// $('#test_form').submit(function(){
			// 	$.post(
			// 		$(this).attr('action'),
			// 		$(this).serialize(),
			// 		function(data){
			// 			$('#results').html(data);
			// 		}
			// 	);
			// 	return false;
			// });

			// $('#test_form').submit();


		}); //end of document.ready

	</script>
	
</head>
<body>
	<form id="send_message" action="">
		<input type="text" id="message" placeholder="message">
		<input type="submit" value="Send">
	</form>
	<!-- <img id="ninja1" src="/ninja/img/down1.png" style="position: absolute; left:300px; top:150px;"> -->
	<div id="add_image">
	
	</div>
	<!-- <img src="http://www.w3schools.com/images/w3schoolslogoNEW310113.gif"> -->

<!-- 	<form id="test_form" action="process.php" method="post">
		<input type="hidden" id="x" name="x" value="5" />
		<input type="hidden" id="y" name="y" value="5" />
		<input type="hidden" id="direction" name="direction" value="down" />

		<input type="submit" value="Submit" />
	</form> -->
	
</body>
</html>